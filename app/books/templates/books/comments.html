{% for comment in comments_list %}

<div id="{{comment.id}}" class="container-fluid">
    <div class="card border-secondary">

        <!-- card header -->
        <div class="card-header {% if comment.author == request.user %}text-light bg-dark{% endif %}">

            <!-- expand and collapse comment buttons -->
            {% with num_children=comment.num_children %}
            {% if num_children %}
            <button class="expand-comment btn {% if comment.author == request.user %}text-light bg-dark{% else %}btn-light{% endif %} btn-sm" style="display:none">
                <i class="fa fa-plus"></i>
                <span>{{ num_children }}</span>
            </button>
            <button class="collapse-comment btn {% if comment.author == request.user %}text-light bg-dark{% else %}btn-light{% endif %} btn-sm"><i class="fa fa-minus"></i></button>
            {% endif %}
            {% endwith %}

            <!-- upvote button -->
            <button class="upvote-comment btn {% if comment.author == request.user %}text-light bg-dark{% else %}btn-light{% endif %} btn-sm" data-status={% if request.user in comment.upvotes.all %}true{% else %}false{% endif %} data-endpoint="#"> 
                <i class="upvote-icon fa fa-thumbs-up" {% if request.user in comment.upvotes.all %}style="color: teal;"{% endif %}></i>
                <span class="upvote-count" data-upvotes={{ comment.upvotes.all.count }}>{{ comment.upvotes.all.count }}</span>
            </button>

            <!-- author -->
            <span> 
                {{ comment.author }}
            </span>
            <button data-comment-id="{{ comment.id }}" class="reply btn {% if comment.author == request.user %}text-light bg-dark{% else %}btn-light{% endif %} btn-sm"> 
                <i class="fa fa-reply"></i>
            </button>

            <!-- report button or delete comment button -->
            {% if comment.author == request.user %}
           
            <button class="delete-comment btn text-light bg-dark btn-sm" data-endpoint="#"> 
                <i class="fa fa-times"></i>
            </button> 
            {% else %}
            <button class="btn btn-light btn-sm"> 
                <i class="fa fa-exclamation"></i>
            </button> 
            {% endif %}
            <small class="pull-right">
                {{ comment.updated_at }}
            </small>
        </div>

        <!-- card body -->
        <div class="card-body">
            <p>{{ comment }}</p>
        </div>

        <!-- div to hold the comment reply form -->
        <div class="create-child-level-comment">
        </div>

        <!-- child comments -->
        <div class="child-comments">
            {% include "books/comments.html" with comments_list=comment.comment_set.all%}
        </div>
    </div>
<br>

</div>

{% endfor %}
